<?xml version="1.0" encoding="utf-8" ?>
<problem
   package = "unix.filesystem"
   id = "traverse-4"
   type = "standard">
  <statement language="ru_RU">
    <description>

<p>В аргументе командной строки передается путь к каталогу D и максимальный размер Z.</p>

<p>На стандартный поток вывода напечатайте в любом порядке относительные пути к регулярным файлам, которые доступны на чтение текущему пользователю и имеют размер не больше Z. Подкаталоги обрабатывайте рекурсивно на глубину не более 4. Каждый путь выводите на отдельной строке. Относительные пути не должны содержать каталогов
<tt>.</tt> и <tt>..</tt></p>

<p>Символические ссылки игнорируйте.</p>

<p>Глубиной 0 считается каталог, заданный в аргументах командной строки.
Относительный путь к файлу на глубине 4 запишется в виде
<tt>a/b/c/d</tt>
Это - максимальная глубина, которая должна обрабатываться.</p>

<p>Не используйте <tt>scandir</tt>, <tt>ftw</tt> и аналогичные функции.
Не используйте <tt>chdir</tt>, <tt>fchdir</tt>, <tt>telldir</tt>, <tt>seekdir</tt>, а также <tt>getpwd</tt> и аналогичные.
Можно использовать <tt>opendir</tt>, <tt>readdir</tt>, <tt>closedir</tt>, access и <tt>*stat</tt>.</p>

<p>Например, если в аргументе командной строки задана директория <tt>/tmp</tt>, в которой есть такие поддиректории и файлы:</p>
<pre>
$ tree /tmp
/tmp
|-- a
|-- b
|   `-- c
`-- d
    `-- e
        `-- f
            `-- g

4 directories, 3 files
</pre>
<p>Вывод программы должен быть таким (порядок строк может отличаться):</p>
<pre>a
b/c
d/e/f/g</pre>

    </description>
  </statement>
  <review_comments>
    <comment>Небезопасная работа со строками: возможно переполнение буфера. Используйте snprintf.</comment>
    <comment>Используйте strdup вместо malloc/strcpy.</comment>
  <comment>Устраните continue</comment>
<comment>Предпочитайте sizeof(value) выражению sizeof(type) или явному указанию константы размера</comment>
<comment>"Магические числа" в коде. Используйте и документируйте константы.</comment>
<comment>Если строка кода слишком длинная, разбивайте ее логичным образом, и остальные части должны быть с отступом</comment>
<comment>Уберите отладочный код</comment>
</review_comments>
</problem>
